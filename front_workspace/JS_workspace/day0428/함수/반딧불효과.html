<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../../../lib/common.js"></script>

    <style>
        body{ margin: 0;}

        #wrapper { 
            height: 900px;
            background-image: url(../../../images/bandi/night.jpg);
            background-size: 100% 100%;
        }
    </style>
    <script>
        let img;
        let targetX = 600;
        let targetY = 700;
        let a = 0.1;
        let count = 0; //반딧불의 위치를 언제 바꿀지를 결정짓는 변수

        function move(){
            img.style.left = parseFloat(img.style.left) + a*(targetX-parseFloat(img.style.left))+"px";
            img.style.top = parseFloat(img.style.top) + a*(targetY-parseFloat(img.style.top))+"px";
        }
        
        function setPos(){
            targetX = getRandom(10)*100; //0~1000
            targetY = getRandom(9)*100; //0~900
        }

        function gameLoop(){
            if(++count%50==0) setPos();
            move();
        }


        function init(){
            img = document.createElement("img");
            img.src = "../../../images/bandi/bug.png";
            img.style.width=40+"px";
            img.style.position="absolute";
            img.style.top = 100+"px";
            img.style.left = 100+"px";

            document.querySelector("#wrapper").appendChild(img);
        }
        
        addEventListener("load",()=>{
            init();

            document.querySelector("#wrapper").addEventListener("mousedown", ()=>{
                targetX = event.clientX;
                targetY = event.clientY;
            });

            setInterval(gameLoop,30);
        });
    </script>
</head>
<body>
    <div id="wrapper"></div>
</body>
</html>